# Все экраны
WindowManager:
    LoginWindow:
    CreateAccountWindow:
    MainWindow:
    CreateTask:
    Timer:

##############################
#
#       Экран входа
#
##############################
<LoginWindow>:

    name: 'login'
    email: email
    password: password

    FloatLayout:
        MDBoxLayout:
            # Размеры, позиция
            size_hint_y: None
            height: root.height
            FitImage:
                source: 'Page.jpg'


        MDFloatLayout:
            cols: 1
            MDLabel:
                text: 'NewSelf'
                font_name: 'Text.ttf'
                color: 1, 1, 1, 1 # цвет
                font_size: '40sp'
                pos_hint: {'center_y': .7241} # позиция
                halign: 'center'

        RoundedButton:
            text: 'ВОЙТИ'
            font_name: 'Text.ttf'
            size_hint: .397, .0765
            pos_hint: {'center_x': .5, 'center_y': .2893} # позиция
            font_size: '20sp'
            radius: [20]

            on_release:
                root.loginBtn()


        RoundedButton:
            text: 'СОЗДАТЬ АККАУНТ'
            font_name: 'Text.ttf'
            size_hint: .6346, .0765
            pos_hint: {'center_x': .5, 'center_y': .1724} # позиция
            font_size: '20sp'
            radius: [20]

            on_release:
                app.root.current = 'create'
                root.manager.transition.direction = "left"


        MDTextFieldRound:
            id: email
            hint_text: "E-mail"
            font_size: "20sp"
            font_name: 'Text.ttf'
            size_hint_x: .648
            size_hint_y: .068
            pos_hint: {'center_y': .57, 'center_x': .5} # позиция
            multiline: False
            normal_color : [1,1,1,.5]
            color_active : [.79,.89,.79,.5]
            line_color: [.81,.81,.81,1]

        MDTextFieldRound:
            id: password
            hint_text: 'Пароль'
            font_size: "20sp"
            font_name: 'Text.ttf'
            size_hint_x: .648
            size_hint_y: .068
            pos_hint: {'center_y': .47, 'center_x': .5} # позиция
            multiline: False
            normal_color : [1,1,1,.5]
            color_active : [.79,.89,.79,.5]
            line_color: [.81,.81,.81,1]
            password: True # звездочки при вводе пароля

        MDIconButton:
            icon: 'eye-off'
            pos_hint: {"center_y": .47, 'center_x': .8} # позиция
            theme_text_color: "Hint"
            on_release:
                self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                password.password = False if password.password is True else True

########################################
#
#       Экран создания аккаунта
#
########################################
<CreateAccountWindow>:
    name: 'create'
    namee: namee
    email: email
    password: passw

    FloatLayout:

        MDBoxLayout:
            size_hint_y: None
            height: root.height

            FitImage:
                source: 'Page.jpg'


        MDTextFieldRound:
            id: namee
            font_name: 'Text.ttf'
            hint_text: 'Имя'
            font_size: "20sp"
            multiline: False
            pos_hint: {'center_y': .67, 'center_x': .5} # позиция
            size_hint_x: .648
            size_hint_y: .068
            # цвет
            normal_color : [1,1,1,.5]
            color_active : [.79,.89,.79,.5]
            line_color: [.81,.81,.81,1]

        MDTextFieldRound:
            id: email
            font_name: 'Text.ttf'
            hint_text: 'E-mail'
            font_size: "20sp"
            multiline: False
            pos_hint: {'center_y': .57, 'center_x': .5} # позиция
            size_hint_x: .648
            size_hint_y: .068
            # цвет
            normal_color : [1,1,1,.5]
            color_active : [.79,.89,.79,.5]
            line_color: [.81,.81,.81,1]

        MDTextFieldRound:
            id: passw
            font_name: 'Text.ttf'
            hint_text: 'Пароль (Max 15 символов)'
            font_size: "20sp"
            multiline: False
            pos_hint: {'center_y': .47, 'center_x': .5} # позиция
            font_size: (20)
            size_hint_x: .648
            size_hint_y: .068
            # цвет
            normal_color : [1,1,1,.5]
            color_active : [.79,.89,.79,.5]
            line_color: [.81,.81,.81,1]

        RoundedButton:
            text: 'СОЗДАТЬ'
            font_name: 'Text.ttf'
            size_hint: .6346, .0765
            pos_hint: {'center_x': .5, 'center_y': .1724} # позиция
            font_size: '20sp'
            radius: [20]

            on_release:
                root.submit()
        MDIconButton:
            icon: "chevron-left"
            user_font_size: "35sp"
            theme_text_color: 'Custom'
            text_color: [1, 1, 1, 1]
            pos_hint: {"center_y": .95} # позиция

            on_release:
                app.root.current = 'login'
                root.manager.transition.direction = "right"
        MDLabel:
            text: "Back"
            font_size: "18sp"
            theme_text_color: 'Custom'
            text_color: [1, 1, 1, 1]
            pos_hint: {"center_x": .615, "center_y": .949} # позиция

<RoundedButton@Button>:
    background_color: (0, 0, 0, 0)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (148/255, 196/255, 147/255, 1)
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [20]

########################################
#
#       Экран создания заданий
#
########################################
<CreateTask>:
    name: 'createTask'
    nameTask: nameTask
    dateTask: dateTask

    MDLabel:
        text: 'Список задач'
        pos_hint: {'center_x': .7, 'center_y': .9} # позиция
        font_name: 'Text.ttf'
        color: 0, 0, 0, 1
        font_size: '30sp'

    MDIconButton:
        icon: 'plus'
        theme_text_color: 'Custom'
        text_color: [1, 1, 1, 1] # цвет текста
        pos_hint: {'center_x': .87, 'center_y': .9} # позиция
        md_bg_color: .58, .77, .58, 1 # цвет задней панели
        on_release:
            root.add_task()

    MDTextFieldRound:
        id: nameTask
        font_name: 'Text.ttf'
        hint_text: 'Название задачи'
        font_size: "16sp"
        multiline: False
        pos_hint: {'center_y': .8, 'center_x': .5} # позиция
        size_hint_x: .648
        size_hint_y: .068
        # цвет
        normal_color : [1,1,1,.5]
        color_active : [.79,.89,.79,.5]
        ine_color: [.81,.81,.81,1]

    MDTextFieldRound:
        id: dateTask
        font_name: 'Text.ttf'
        hint_text: 'Комментарий'
        font_size: "16sp"
        multiline: False
        pos_hint: {'center_y': .7, 'center_x': .37} # позиция
        size_hint_x: .4
        size_hint_y: .068
        # цвет
        normal_color : [1,1,1,.5]
        color_active : [.79,.89,.79,.5]
        line_color: [.81,.81,.81,1]

    MDIconButton:
        icon: 'eye-check-outline'
        theme_text_color: 'Custom'
        text_color: [1, 1, 1, 1]
        pos_hint: {'center_x': .78, 'center_y': .7} # позиция
        md_bg_color: .58, .77, .58, 1
        size_hint_x: .22
        size_hint_y: .068
        on_release:
            root.view_tasks()

    MDBoxLayout: # Коробка с виджетами
        pos_hint: {'center_x': .5, 'center_y': .4} # позиция
        size_hint: .845, .45
        radius: [20]
        ScrollView:
            MDList:
                id: scroll

#############################
#
#       Главный экран
#
#############################
<MainWindow>:
    name: 'main'
    n: n
    email: email
    created: created

    MDFloatLayout:
        md_bg_color: 1, 1, 1, 1 # цвет задней панели
        ScreenManager:
            id: scr
            MDScreen:
                name: 'task'
                CreateTask:
            MDScreen:
                name: 'timer'
                Timer:
            MDScreen:
                name: 'profile'
                MDCard:
                    pos_hint: {'center_x': .5, 'center_y': .63} # позиция
                    size_hint: .85, .5937
                    md_bg_color: .58, .77, .58, 1 # цвет задней панели
                    radius: [20]
                RoundedButton:
                    text: 'ВЫЙТИ'
                    font_name: 'Text.ttf'
                    pos_hint: {'center_x': .5, 'center_y': .24} # позиция
                    font_size: '20sp'
                    size_hint: .397, .0765
                    radius: [20]

                    on_release:
                        # чтобы при повторном входе в приложение открывался экран списка задач
                        scr.current = "timer"
                        root.log_out()
                        scr.current = "task"
                        app.root.current = 'login' # переход на экран авторизации
                MDLabel:
                    id: n
                    pos_hint: {'center_x': .8, 'center_y': .83} # позиция
                    size_hint: .8, .2
                    text: 'Name: '
                    color: 1, 1, 1, 1 # цвет
                    font_name: 'Text.ttf'
                    font_size: "25sp"
                MDLabel:
                    id: email
                    pos_hint: {'center_x': .55, 'center_y': .7} # позиция
                    size_hint: .8, .2
                    text: 'Email: '
                    color: 1, 1, 1, 1 # цвет
                    font_name: 'Text.ttf'
                    font_size: "20sp"
                MDLabel:
                    id: created
                    pos_hint: {'center_x': .55, 'center_y': .6} # позиция
                    size_hint: .8, .2
                    text: 'Дата регистрации: '
                    color: 1, 1, 1, 1 # цвет
                    font_name: 'Text.ttf'
                    font_size: "20sp"
                MDIconButton:
                    pos_hint: {'center_x': .25, 'center_y': .83} # позиция
                    icon: "account"
                    user_font_size: "80sp"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1 # цвет
                MDIconButton:
                    pos_hint: {'center_x': .8, 'center_y': .24} # позиция
                    size_hint: .13, .0765
                    icon: 'help-circle-outline'
                    theme_text_color: "Custom"
                    text_color: .58, .77, .58, 1 # цвет
                    user_font_size: "50sp"

                    on_release:
                        root.info()

########################################
#
#       Пункт управления экаранами
#       в аккаунте
#
########################################
        Navbar:
            size_hint: .85, .1
            pos_hint: {"center_x": .5, "center_y": .1}
            md_bg_color: .58, .77, .58, 1 # цвет задней панели
            radius: [16]

            MDGridLayout:
                cols: 3
                size_hint_x: 1
                pos_hint: {"center_x": .5, "center_y": .5}

                AnchorLayout:
                    anchor_x: 'center'
                    MDIconButton:
                        id: nav_icon1
                        icon: "format-list-bulleted"
                        ripple_scale: 0
                        user_font_size: "40sp"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1 # цвет текста
                        on_release:
                            scr.current = "task"
                            # текст иконок при выборе/отмене выбора
                            nav_icon1.text_color = 1, 1, 1, 1
                            nav_icon2.text_color = .79, .88, .79, .7
                            nav_icon3.text_color = .79, .88, .79, .7

                AnchorLayout:
                    anchor_x: 'center'
                    MDIconButton:
                        id: nav_icon2
                        icon: "alarm-check"
                        ripple_scale: 0
                        user_font_size: "40sp"
                        theme_text_color: "Custom"
                        text_color: .79, .88, .79, .7
                        on_release:
                            scr.current = "timer"
                            # текст иконок при выборе/отмене выбора
                            nav_icon1.text_color = .79, .88, .79, .7
                            nav_icon2.text_color = 1, 1, 1, 1
                            nav_icon3.text_color = .79, .88, .79, .7

                AnchorLayout:
                    anchor_x: 'center'
                    MDIconButton:
                        id: nav_icon3
                        icon: "account"
                        ripple_scale: 0
                        user_font_size: "40sp"
                        theme_text_color: "Custom"
                        text_color: .79, .88, .79, .7 # цвет текста
                        on_release:
                            scr.current = "profile"
                            # текст иконок при выборе/отмене выбора
                            nav_icon1.text_color = .79, .88, .79, .7
                            nav_icon2.text_color = .79, .88, .79, .7
                            nav_icon3.text_color = 1, 1, 1, 1









